import streamlit as st
import pandas as pd
import plotly.express as px

# ุฅุนุฏุงุฏุงุช ุงูุตูุญุฉ
st.set_page_config(
    page_title="Faculty Members",
    page_icon="๐ฅ",
    layout="wide"
)

st.title("๐ฅ ุฃุนุถุงุก ููุฆุฉ ุงูุชุฏุฑูุณ")
st.write("ุตูุญุฉ ุนุฑุถ ูุนูููุงุช ุฃุนุถุงุก ููุฆุฉ ุงูุชุฏุฑูุณ ูู ุฌููุน ุงูุจุฑุงูุฌ ุงูุฃูุงุฏูููุฉ")

# ุจูุงูุงุช ุฃุนุถุงุก ููุฆุฉ ุงูุชุฏุฑูุณ (ูููุฐุฌ ุชุฌุฑูุจู)
def load_faculty_data():
    # ูููู ุชุนุฏูู ูุฐู ุงูุฏุงูุฉ ูุงุญููุง ูุชุญููู ุงูุจูุงูุงุช ูู GitHub
    data = {
        "ุงูุงุณู": ["ุฏ. ูุญูุฏ ุฃุญูุฏ", "ุฏ. ุนุจุฏุงููู ูุญูุฏ", "ุฏ. ูุงุทูุฉ ุนูู", "ุฏ. ุฎุงูุฏ ุฅุจุฑุงููู", 
                  "ุฏ. ุนุงุฆุดุฉ ุณุนุฏ", "ุฏ. ุนูู ุญุณู", "ุฏ. ููุฑุฉ ุฎุงูุฏ", "ุฏ. ุณุงุฑุฉ ูุงุตุฑ"],
        "ุงูุฏุฑุฌุฉ ุงูุนูููุฉ": ["ุฃุณุชุงุฐ", "ุฃุณุชุงุฐ ูุดุงุฑู", "ุฃุณุชุงุฐ ูุณุงุนุฏ", "ุฃุณุชุงุฐ ูุณุงุนุฏ", 
                           "ุฃุณุชุงุฐ", "ุฃุณุชุงุฐ ูุดุงุฑู", "ุฃุณุชุงุฐ ูุณุงุนุฏ", "ูุญุงุถุฑ"],
        "ุงูุชุฎุตุต": ["ุนููู ุงููุฑุขู", "ุงููุฑุงุกุงุช", "ุงูุชูุณูุฑ", "ุนููู ุงููุฑุขู", 
                    "ุงููุฑุงุกุงุช", "ุงูุชูุณูุฑ", "ุนููู ุงููุฑุขู", "ุงููุฑุงุกุงุช"],
        "ุงูุจุฑูุงูุฌ": ["ุจูุงููุฑููุณ ูู ุงููุฑุขู ูุนูููู", "ุจูุงููุฑููุณ ุงููุฑุงุกุงุช", "ูุงุฌุณุชูุฑ ุงูุฏุฑุงุณุงุช ุงููุฑุขููุฉ ุงููุนุงุตุฑุฉ", "ูุงุฌุณุชูุฑ ุงููุฑุงุกุงุช", 
                     "ุฏูุชูุฑุงู ุนููู ุงููุฑุขู", "ุฏูุชูุฑุงู ุงููุฑุงุกุงุช", "ุจูุงููุฑููุณ ูู ุงููุฑุขู ูุนูููู", "ูุงุฌุณุชูุฑ ุงููุฑุงุกุงุช"],
        "ุงูุฃุจุญุงุซ ุงูููุดูุฑุฉ": [15, 8, 12, 7, 20, 14, 5, 9],
        "ุณููุงุช ุงูุฎุจุฑุฉ": [18, 12, 8, 10, 22, 16, 6, 9]
    }
    return pd.DataFrame(data)

# ุชุญููู ุงูุจูุงูุงุช
faculty_df = load_faculty_data()

# ุนูุงุตุฑ ุงูุชุญูู ูู ุงูุดุฑูุท ุงูุฌุงูุจู
st.sidebar.header("ุชุตููุฉ ุงูุจูุงูุงุช")

# ุชุตููุฉ ุญุณุจ ุงูุจุฑูุงูุฌ
all_programs = ["ุฌููุน ุงูุจุฑุงูุฌ"] + faculty_df["ุงูุจุฑูุงูุฌ"].unique().tolist()
selected_program = st.sidebar.selectbox("ุงุฎุชุฑ ุงูุจุฑูุงูุฌ:", all_programs)

# ุชุตููุฉ ุญุณุจ ุงูุฏุฑุฌุฉ ุงูุนูููุฉ
all_degrees = ["ุฌููุน ุงูุฏุฑุฌุงุช ุงูุนูููุฉ"] + faculty_df["ุงูุฏุฑุฌุฉ ุงูุนูููุฉ"].unique().tolist()
selected_degree = st.sidebar.selectbox("ุงูุฏุฑุฌุฉ ุงูุนูููุฉ:", all_degrees)

# ุชุทุจูู ุงูุชุตููุฉ
filtered_df = faculty_df.copy()
if selected_program != "ุฌููุน ุงูุจุฑุงูุฌ":
    filtered_df = filtered_df[filtered_df["ุงูุจุฑูุงูุฌ"] == selected_program]
if selected_degree != "ุฌููุน ุงูุฏุฑุฌุงุช ุงูุนูููุฉ":
    filtered_df = filtered_df[filtered_df["ุงูุฏุฑุฌุฉ ุงูุนูููุฉ"] == selected_degree]

# ุนุฑุถ ุงููุชุงุฆุฌ
st.header("ูุงุฆูุฉ ุฃุนุถุงุก ููุฆุฉ ุงูุชุฏุฑูุณ")
st.dataframe(filtered_df, use_container_width=True)

# ุฅุญุตุงุฆูุงุช ูุชุญูููุงุช
st.header("ุฅุญุตุงุฆูุงุช ุฃุนุถุงุก ููุฆุฉ ุงูุชุฏุฑูุณ")

col1, col2 = st.columns(2)

with col1:
    # ุชูุฒูุน ุงูุฃุนุถุงุก ุญุณุจ ุงูุจุฑูุงูุฌ
    program_counts = faculty_df["ุงูุจุฑูุงูุฌ"].value_counts().reset_index()
    program_counts.columns = ["ุงูุจุฑูุงูุฌ", "ุนุฏุฏ ุงูุฃุนุถุงุก"]

    fig1 = px.pie(
        program_counts, 
        values="ุนุฏุฏ ุงูุฃุนุถุงุก", 
        names="ุงูุจุฑูุงูุฌ", 
        title="ุชูุฒูุน ุฃุนุถุงุก ููุฆุฉ ุงูุชุฏุฑูุณ ุญุณุจ ุงูุจุฑูุงูุฌ"
    )
    st.plotly_chart(fig1, use_container_width=True)

with col2:
    # ุชูุฒูุน ุงูุฃุนุถุงุก ุญุณุจ ุงูุฏุฑุฌุฉ ุงูุนูููุฉ
    degree_counts = faculty_df["ุงูุฏุฑุฌุฉ ุงูุนูููุฉ"].value_counts().reset_index()
    degree_counts.columns = ["ุงูุฏุฑุฌุฉ ุงูุนูููุฉ", "ุนุฏุฏ ุงูุฃุนุถุงุก"]

    fig2 = px.bar(
        degree_counts, 
        x="ุงูุฏุฑุฌุฉ ุงูุนูููุฉ", 
        y="ุนุฏุฏ ุงูุฃุนุถุงุก", 
        title="ุชูุฒูุน ุฃุนุถุงุก ููุฆุฉ ุงูุชุฏุฑูุณ ุญุณุจ ุงูุฏุฑุฌุฉ ุงูุนูููุฉ"
    )
    st.plotly_chart(fig2, use_container_width=True)

# ูุนูููุงุช ุชูุตูููุฉ
st.header("ุงููุนูููุงุช ุงูุชูุตูููุฉ ูุฃุนุถุงุก ููุฆุฉ ุงูุชุฏุฑูุณ")
st.write("ุงุฎุชุฑ ุนุถู ููุฆุฉ ุชุฏุฑูุณ ูู ุงููุงุฆูุฉ ูุนุฑุถ ูุนูููุงุชู ุงูุชูุตูููุฉ")

selected_faculty = st.selectbox("ุงุฎุชุฑ ุนุถู ููุฆุฉ ุชุฏุฑูุณ:", faculty_df["ุงูุงุณู"])
if selected_faculty:
    faculty_info = faculty_df[faculty_df["ุงูุงุณู"] == selected_faculty].iloc[0]

    col1, col2, col3 = st.columns(3)
    with col1:
        st.info(f"**ุงูุงุณู**: {faculty_info['ุงูุงุณู']}")
        st.info(f"**ุงูุฏุฑุฌุฉ ุงูุนูููุฉ**: {faculty_info['ุงูุฏุฑุฌุฉ ุงูุนูููุฉ']}")
    with col2:
        st.info(f"**ุงูุชุฎุตุต**: {faculty_info['ุงูุชุฎุตุต']}")
        st.info(f"**ุงูุจุฑูุงูุฌ**: {faculty_info['ุงูุจุฑูุงูุฌ']}")
    with col3:
        st.info(f"**ุงูุฃุจุญุงุซ ุงูููุดูุฑุฉ**: {faculty_info['ุงูุฃุจุญุงุซ ุงูููุดูุฑุฉ']}")
        st.info(f"**ุณููุงุช ุงูุฎุจุฑุฉ**: {faculty_info['ุณููุงุช ุงูุฎุจุฑุฉ']}")

    # ุนุฑุถ ุจูุงูุงุช ููููุฉ ุนู ุงูููุงุฏ ุงูุชู ูุฏุฑุณูุง
    st.subheader("ุงูููุงุฏ ุงูุชู ูุฏุฑุณูุง")
    courses = {
        "ุฑูุฒ ุงูููุฑุฑ": ["QUR101", "QUR202", "QUR305"],
        "ุงุณู ุงูููุฑุฑ": ["ูุฏุฎู ูุนููู ุงููุฑุขู", "ุฃุตูู ุงูุชูุณูุฑ", "ููุงูุฌ ุงูููุณุฑูู"],
        "ุงููุตู ุงูุฏุฑุงุณู": ["ุงูุฃูู", "ุงูุซุงูู", "ุงูุฃูู"]
    }
    st.dataframe(pd.DataFrame(courses))

    # ุฑุณู ุจูุงูู ูุชุทูุฑ ุงูุฃุจุญุงุซ
    st.subheader("ุชุทูุฑ ุงูุฃุจุญุงุซ ุงูููุดูุฑุฉ (ูููุฐุฌ)")
    research_data = {
        "ุงูุณูุฉ": [2019, 2020, 2021, 2022, 2023],
        "ุนุฏุฏ ุงูุฃุจุญุงุซ": [2, 3, 1, 4, 3]
    }
    research_df = pd.DataFrame(research_data)
    fig = px.line(
        research_df, 
        x="ุงูุณูุฉ", 
        y="ุนุฏุฏ ุงูุฃุจุญุงุซ", 
        markers=True,
        title=f"ุงูุฅูุชุงุฌ ุงูุจุญุซู ูู {selected_faculty}"
    )
    st.plotly_chart(fig)
